---
title: "COVID-19 EDA"
author: 
        - Byron Smith (300504707)
        - Iona Sammons
        - Lauren Halka
date: "05/08/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Background and Data

### Dataset and Source
The dataset we are using is the `Covid 19 data portal` dataset developed and maintained by Stats NZ. The source of the data is from numerous sources including New Zealand government agencies such as the Reserve Bank of New Zealand, The Treasury and the Ministry of Social Development, banks and other international sources.

### Why is the dataset of interest?
The data set includes data on three main categories; Economic, Health and Social. Each of these categories has a number of sub categories which have different indicators such as, Boradband Usage and Border Crossings. The majority of the indicators are New Zealand based but there are also a few indicators to do with other countries eg. US Economic Index.  

  As most of the data is New Zealand based, it will be useful for answering a number of questions about the impact of COVID-19 and the Alert Level restrictions. An example of a question we may want to answer is: What is the effect of an Alert Level increase/ decrease on the NZD foreign exchange rate with USD? To answer this we would look at the timeseries data on NZD/USD exchange and find the Alert Level announcement and commencement dates.
  
  Another question we could look at is: How many people have not left New Zealand due to COVID-19? This would be answered by looking at daily border crossings (departures), where we would model a prediction, had COVID-19 not had any effect, versus what we actually saw.

### Data types and structure

##### Structure 
The dataset is structured in a tree like pattern, where there are four main classes, which each have a number of categories with a number of indicators. Some indicators also contain sub-categories which splits the data into categories such as City or Type of Passport. This is represented in the dataset with columns called `class`, `category`, `indicator_name` and `sub_series`. 

  There are three columns which contain the actual time series information. These columns have the date, value and unit of measure. The values of different indicators have a number of units of measure including dollars, tonnes, percentage, percentage per annum, index and number.  
  
  The last column is the date that the data for the indicator was last updated. This appears to apply to all the indicator values for all dates and not just the most recent value added to the indicator.
  
##### Types
The dataset is a time series dataset with time series information for each sub-category. When we select and extract a categoruy from the dataset we will be left with a complete time series dataset for that category. From here we will only need to look at the date, value and maybe the sub-categories within. The majority of the values are numeric and continuous.

### Completeness and Correctness
The dataset has 76 rows that have missing values in the `value` column. These missing values are mostly limited to three indicators and cover a certain time period for each indicator: Electricity Grid Demand (Oct 2003 - Mar 2005), New Jobs Posted Online (Oct 2003 - Dec 2004), Christchurch Heavy Vehicles (03 Dec 2018 - 05 Mar 2019). There is also one row with a missing value for the indicator, Fuel Supply.   

  As the dataset is so large it is hard to determine if there are obvious errors in the data. We will need to wait until we are looking at subsets of the data to pick up on any errors. However, we have visualized different subsets of the data using the Stats NZ COVID-19 data portal tool and have not seen any obvious errors so we can be relatively confident the majority of the data is error free.


### Integration steps

---

## Ethics, Privacy and Security

### Ethical Considerations

### Privacy Concerns

### Security of data

---

## Exploratory Data Analysis

### Overall EDA
```{r message = FALSE}
# import packages
library(dplyr)
```
```{r}
# import the data set
covid <- read.csv("covid_19_data_portal.csv", header = TRUE, stringsAsFactors = FALSE)
```
```{r}
# check how many rows have missing values
nrow(covid[rowSums(is.na(covid)) > 0,])
```
```{r}
# function to extract a subset of the data by class, category and indicator_name
get.subset <- function(cl, cat, ind) {
  return(filter(covid, class = cl, category = cat, indicator_name = ind))
}
```

### EDA 1
- Weekly economic sentiment
- New Zealand Stock exchange - all index
```{r}
head(filter(covid, indicator_name == "Foreign exchange"))
```
```{r}
head(filter(covid, indicator_name == "Economic sentiment"))
```


### EDA 2

### EDA 3

---

## Individual Contributions









